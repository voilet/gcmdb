(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{T6na:function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a("MVZn"));a("miYZ");var s=r(a("tsqr")),u=r(a("o0o1")),c=a("VKt+"),l={namespace:"guser",state:{data:{data:{user_infos:[],role_list:[]},pagination:{}},ssh_role:[]},effects:{fetch:u.default.mark(function e(t,a){var r,n,s;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,n=a.put,e.next=3,r(c.queryUsers);case 3:return s=e.sent,e.next=6,n({type:"saveInfos",payload:s});case 6:case"end":return e.stop()}},e,this)}),fetchCurrent:u.default.mark(function e(t,a){var r,n,s;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.call,n=a.put,e.next=3,r(queryCurrent);case 3:return s=e.sent,e.next=6,n({type:"saveCurrentUser",payload:s});case 6:case"end":return e.stop()}},e,this)}),fetchSSHRoleList:u.default.mark(function e(t,a){var r,n,s,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(c.querySSHRoleList);case 4:return l=e.sent,e.next=7,s({type:"saveSSHRoleList",payload:l,callback:r&&r.callback||function(){}});case 7:case"end":return e.stop()}},e,this)}),deleteSSHPermission:u.default.mark(function e(t,a){var r,n,l,i;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,l=a.put,e.next=4,n(c.deleteSSHPermission,r.params);case 4:if(i=e.sent,!i||200!=i.status){e.next=10;break}return e.next=8,l({type:"gforthost/updateSSHPermissionData",payload:r.params});case 8:e.next=11;break;case 10:s.default.error("\u5220\u9664\u6743\u9650\u5931\u8d25");case 11:r.callback&&r.callback();case 12:case"end":return e.stop()}},e,this)}),modifySSHPermission:u.default.mark(function e(t,a){var r,n,l,i;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,l=a.put,e.next=4,n(c.modifySSHPermission,r.params);case 4:if(i=e.sent,!i||200!=i.status){e.next=10;break}return e.next=8,l({type:"gforthost/updateSSHPermissionData",payload:r.params});case 8:e.next=11;break;case 10:s.default.error("\u4fee\u6539\u6743\u9650\u5931\u8d25");case 11:r.callback&&r.callback();case 12:case"end":return e.stop()}},e,this)}),modifyUser:u.default.mark(function e(t,a){var r,n,s,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(c.modifyUserlist,r);case 4:return l=e.sent,e.next=7,s({type:"saveResponse",payload:l,cb:r.cb});case 7:return e.next=9,s({type:"reloadUser"});case 9:case"end":return e.stop()}},e,this)}),addUser:u.default.mark(function e(t,a){var r,n,s,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(c.addUserlist,r.description);case 4:return l=e.sent,e.next=7,s({type:"saveResponse",payload:l,cb:r.cb});case 7:return e.next=9,s({type:"reloadUser"});case 9:case"end":return e.stop()}},e,this)}),searchUser:u.default.mark(function e(t,a){var r,n,s,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.payload,n=a.call,s=a.put,e.next=4,n(c.searchUserlist,r.destination);case 4:return l=e.sent,e.next=7,s({type:"searchSaveUser",payload:l});case 7:case"end":return e.stop()}},e,this)}),reloadUser:u.default.mark(function e(t,a){var r;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=a.put,a.select,e.next=3,r({type:"getUserlist"});case 3:case"end":return e.stop()}},e,this)})},reducers:{saveResponse(e,t){return t.cb&&t.cb(t.payload),(0,n.default)({},e,{response:t.payload})},searchSaveUser(e,t){return(0,n.default)({},e,{data:t.payload})},saveInfos(e,t){return(0,n.default)({},e,{data:t.payload})},saveSSHRoleList(e,t){return t.callback&&t.callback(t.payload),(0,n.default)({},e,{ssh_role:t.payload.data||[]})},updateSSHRoleList(e,t){var a=t.payload,r=e.ssh_role||[];if(a){switch(a.act){case"add":r.push(a.data);break;case"delete":r=r.filter(e=>{return e.ID!=a.data.ID});break;case"edit":for(var s=0;s<r.length;s++)r[s].ID==a.data.ID&&(r[s]=(0,n.default)({},a.data));break}return(0,n.default)({},e,{ssh_role:r})}},changeNotifyCount(e,t){return(0,n.default)({},e,{currentUser:(0,n.default)({},e.currentUser,{notifyCount:t.payload})})},empty(e,t){return(0,n.default)({},e,{data:{data:{user_infos:[]},pagination:{}}})}}};t.default=l},"VKt+":function(e,t,a){"use strict";var r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.queryUsers=l,t.querySSHRoleList=o,t.modifySSHPermission=p,t.deleteSSHPermission=h,t.modifyUserlist=w,t.addUserlist=v,t.searchUserlist=b;var n=r(a("MVZn")),s=r(a("o0o1")),u=r(a("yXPU")),c=(a("Qyje"),r(a("t3Un")));function l(){return i.apply(this,arguments)}function i(){return i=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/manage/auth/user/info"));case 1:case"end":return e.stop()}},e,this)})),i.apply(this,arguments)}function o(){return d.apply(this,arguments)}function d(){return d=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/v1/ssh/group/list"));case 1:case"end":return e.stop()}},e,this)})),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)(`/v1/ssh/user/updates/${t.ID}`,{method:"POST",body:(0,n.default)({},t,{method:"post"})}));case 1:case"end":return e.stop()}},e,this)})),f.apply(this,arguments)}function h(e){return y.apply(this,arguments)}function y(){return y=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)(`/v1/ssh/user/delete/${t.ID}`,{method:"POST",body:(0,n.default)({},t,{method:"post"})}));case 1:case"end":return e.stop()}},e,this)})),y.apply(this,arguments)}function w(e){return m.apply(this,arguments)}function m(){return m=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/manage/auth/user/modify",{method:"POST",body:(0,n.default)({},t,{method:"post"})}));case 1:case"end":return e.stop()}},e,this)})),m.apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return x=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/manage/auth/user/add",{method:"POST",body:(0,n.default)({},t,{method:"post"})}));case 1:case"end":return e.stop()}},e,this)})),x.apply(this,arguments)}function b(e){return S.apply(this,arguments)}function S(){return S=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.default)("/manage/auth/user/search",{method:"POST",body:(0,n.default)({},t,{method:"post"})}));case 1:case"end":return e.stop()}},e,this)})),S.apply(this,arguments)}}}]);