(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{"2Ak+":function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var d=l(a("kLXV")),s=l(a("pVnL"));a("+L6B");var n=l(a("2/Rp"));a("miYZ");var i=l(a("tsqr"));a("OaEy");var o=l(a("2fM7"));a("5NDa");var u=l(a("5rEg"));a("y8nQ");var c,h,p,f,m=l(a("Vl3Y")),v=r(a("q1tI")),g=l(a("8+Ik")),w=a("MuoO"),b=m.default.Item,E=u.default.TextArea,C=(o.default.Option,c=(0,w.connect)(e=>e),h=m.default.create(),c(p=h((f=class extends v.PureComponent{constructor(){super(...arguments),this.state={modalVisible:!1,selectedGroupValue:{}},this.handleModalVisible=(e=>{this.setState({modalVisible:!!e})}),this.handleAddIDC=(e=>{var t=this.props.form;e.preventDefault(),t.validateFields((e,a)=>{if(!e){var l={title:t.getFieldValue("title")?t.getFieldValue("title"):"",num:t.getFieldValue("num")?t.getFieldValue("num"):"",volume:t.getFieldValue("volume")?t.getFieldValue("volume"):"",description:t.getFieldValue("description")?t.getFieldValue("description"):"",componentname:"power"};this.props.dispatch({type:"ghardware/addHardwareComponents",payload:{description:l}}),i.default.success("\u6dfb\u52a0\u6210\u529f"),this.setState({modalVisible:!1}),t.resetFields()}})})}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=(t.form,t.dispatch,{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}});return v.default.createElement("div",{className:g.default.tableListOperator,style:{float:"left"}},v.default.createElement(n.default,{icon:"plus",type:"primary",onClick:()=>this.handleModalVisible(!0)},"\u6dfb\u52a0\u7535\u6e90"),v.default.createElement(d.default,{title:"\u6dfb\u52a0\u7535\u6e90",visible:this.state.modalVisible,onOk:this.handleAddIDC,width:600,onCancel:()=>this.handleModalVisible()},v.default.createElement(b,(0,s.default)({},a,{label:"\u540d\u79f0"}),e("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7535\u6e90\u540d\u79f0"}]})(v.default.createElement(u.default,{placeholder:"\u8bf7\u8f93\u5165\u7535\u6e90\u540d\u79f0"}))),v.default.createElement(b,(0,s.default)({},a,{label:"\u6570\u91cf"}),e("num",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7535\u6e90\u6570\u91cf"}]})(v.default.createElement(u.default,{placeholder:"\u8bf7\u8f93\u5165\u7535\u6e90\u6570\u91cf"}))),v.default.createElement(b,(0,s.default)({},a,{label:"\u5bb9\u91cf"}),e("volume",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7535\u6e90\u5bb9\u91cf"}]})(v.default.createElement(u.default,{placeholder:"\u8bf7\u8f93\u5165\u7535\u6e90\u5bb9\u91cf"}))),v.default.createElement(b,(0,s.default)({},a,{label:"\u63cf\u8ff0"}),e("description")(v.default.createElement(E,{style:{minHeight:32},placeholder:"\u7535\u6e90\u63cf\u8ff0",rows:4})))))}},p=f))||p)||p);t.default=C},"8+Ik":function(e,t,a){e.exports={tableList:"antd-pro-pages-g-resource-g-hardware-set-meal-power-power-tableList",tableListOperator:"antd-pro-pages-g-resource-g-hardware-set-meal-power-power-tableListOperator",tableListForm:"antd-pro-pages-g-resource-g-hardware-set-meal-power-power-tableListForm",submitButtons:"antd-pro-pages-g-resource-g-hardware-set-meal-power-power-submitButtons"}},HQ5V:function(e,t,a){e.exports={standardTable:"antd-pro-components-resource-power-index-standardTable",tableAlert:"antd-pro-components-resource-power-index-tableAlert"}},RaDr:function(e,t,a){"use strict";var l=a("284h"),r=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var d=r(a("wCAj")),s=r(a("MVZn"));a("P2fV");var n=r(a("NJEC"));a("/zsF");var i=r(a("PArb"));a("5NDa");var o=r(a("5rEg")),u=l(a("q1tI")),c=(r(a("wd/R")),r(a("HQ5V"))),h=(a("Po9p"),e=>{var t=e.editable,a=e.value,l=e.onChange;return u.default.createElement("div",null,t?u.default.createElement(o.default,{style:{margin:"-5px 0"},value:a,onChange:e=>l(e.target.value)}):a)});class p extends u.PureComponent{constructor(){super(...arguments),this.state={selectedRowKeys:[],totalCallNo:0,data:[],status:!1,disabled:!0},this.columns=[{title:"\u540d\u79f0",dataIndex:"title",width:"10%",render:(e,t)=>this.renderColumns(e,t,"title")},{title:"\u6570\u91cf",dataIndex:"num",width:"15%",render:(e,t)=>this.renderColumns(e,t,"num")},{title:"\u5bb9\u91cf",dataIndex:"volume",width:"15%",render:(e,t)=>this.renderColumns(e,t,"volume")},{title:"\u63cf\u8ff0",dataIndex:"description",width:"15%",render:(e,t)=>this.renderColumns(e,t,"description")},{title:"\u64cd\u4f5c",dataIndex:"ID",width:"20%",render:(e,t)=>{var a=t.editable,l=t.deleteable;return u.default.createElement("div",{className:"editable-row-operations"},!l&&(a?u.default.createElement("span",null,u.default.createElement("a",{onClick:()=>this.save(t.ID)},"\u4fdd\u5b58"),u.default.createElement(i.default,{type:"vertical"}),u.default.createElement(n.default,{title:"\u786e\u5b9a\u53d6\u6d88?",onConfirm:()=>this.cancel(t.ID)},u.default.createElement("a",null,"\u53d6\u6d88"))):u.default.createElement("span",null,u.default.createElement("a",{onClick:()=>this.edit(t.ID)},"\u7f16\u8f91"))),!a&&(l?u.default.createElement("span",null,u.default.createElement(n.default,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:()=>this.confirmdelete(t.ID)},u.default.createElement("a",null,"\u63d0\u4ea4")),u.default.createElement(i.default,{type:"vertical"}),u.default.createElement("a",{onClick:()=>this.canceldelete(t.ID)},"\u53d6\u6d88")):u.default.createElement("span",{style:{marginLeft:10}},u.default.createElement("a",{onClick:()=>this.askdelete(t.ID)},"\u5220\u9664"))))}}],this.handleStatusChange=((e,t)=>{var a=[...this.state.data],l=a.filter(t=>e===t.ID)[0];l&&(l.enable=t,this.setState({data:a})),console.log("data",this.state.data)}),this.handleTableChange=((e,t)=>{this.props.onChange(e,t)}),this.handleRowSelectChange=((e,t)=>{var a=t.reduce((e,t)=>{return e+parseFloat(t.callNo,10)},0);this.props.onSelectRow&&this.props.onSelectRow(t),this.setState({selectedRowKeys:e,totalCallNo:a}),this.props.handleSelectRows(e)})}componentWillReceiveProps(e){console.log(e.ghardware),e.ghardware.data&&this.setState({data:e.ghardware.data.list})}renderColumns(e,t,a){return u.default.createElement(h,{editable:t.editable,value:e,onChange:e=>this.handleChange(e,t.ID,a)})}handleChange(e,t,a){var l=[...this.state.data],r=l.filter(e=>t===e.ID)[0];r&&(r[a]=e,this.setState({data:l,disabled:!1})),console.log("handleChange",e),console.log("handleChange",e)}edit(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(a.editable=!0,this.setState({data:t,disabled:!1}))}save(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(delete a.editable,a.enable=this.state.status,this.setState({data:t,disabled:!0}),this.cacheData=t.map(e=>(0,s.default)({},e)),console.log("target",a),this.props.handleSaveData(a))}cancel(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(Object.assign(a,this.cacheData.filter(t=>e===t.ID)[0]),delete a.editable,this.setState({data:t,disabled:!0}))}askdelete(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(a.deleteable=!0,this.setState({data:t}))}confirmdelete(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];if(a){var l=t.indexOf(a);l>-1&&t.splice(l,1),a.tag=!1,this.setState({data:t}),this.cacheData=t.map(e=>(0,s.default)({},e)),this.props.handleDeleteData(a)}}canceldelete(e){var t=[...this.state.data],a=t.filter(t=>e===t.ID)[0];a&&(Object.assign(a,this.cacheData.filter(t=>e===t.ID)[0]),delete a.deleteable,this.setState({data:t}))}render(){var e=this.state,t=(e.selectedRowKeys,e.totalCallNo,this.props);t.gidc,t.loading;return this.cacheData=this.state.data.map(e=>(0,s.default)({},e)),u.default.createElement("div",{className:c.default.standardTable},u.default.createElement(d.default,{bordered:!0,rowKey:e=>e.ID,dataSource:this.state.data,columns:this.columns,onChange:this.handleTableChange}))}}var f=p;t.default=f},s2i2:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var d=l(a("bx4M"));a("/zsF");var s=l(a("PArb"));a("qVdP");var n=l(a("jsC+"));a("+L6B");var i=l(a("2/Rp"));a("Pwec");var o=l(a("CtXQ"));a("lUTK");var u=l(a("BvKs")),c=l(a("MVZn"));a("y8nQ");var h,p,f,m,v=l(a("Vl3Y")),g=r(a("q1tI")),w=a("MuoO"),b=l(a("RaDr")),E=l(a("zHco")),C=l(a("2Ak+")),D=l(a("8+Ik")),I=(v.default.Item,e=>Object.keys(e).map(t=>e[t]).join(",")),y=(h=(0,w.connect)(e=>e),p=v.default.create(),h(f=p((m=class extends g.PureComponent{constructor(){super(...arguments),this.state={selectedRows:[],formValues:{}},this.handleStandardTableChange=((e,t,a)=>{var l=this.props.dispatch,r=this.state.formValues,d=Object.keys(t).reduce((e,a)=>{var l=(0,c.default)({},e);return l[a]=I(t[a]),l},{}),s=(0,c.default)({currentPage:e.current,pageSize:e.pageSize},r,d);a.field&&(s.sorter=`${a.field}_${a.order}`),l({type:"ghardware/queryHardwareComponentPower",payload:"power"})}),this.handleSelectRows=(e=>{this.setState({selectedRows:e})}),this.handleSaveData=(e=>{var t=e.ID,a=e.description,l=e.num,r=e.title,d=e.volume;this.props.dispatch({type:"ghardware/modifyHardwareComponents",payload:{ID:t,componentname:"power",description:a,num:l,title:r,volume:d}})}),this.handleDeleteData=(e=>{var t=e.ID,a=[];a.push(t),this.props.dispatch({type:"ghardware/deleteHardwareComponents",payload:{tag:!1,infolist:JSON.stringify({ids:a,componentname:"power"})}})})}componentDidMount(){var e=this.props.dispatch;e({type:"ghardware/queryHardwareComponentPower",payload:"power"})}render(){var e=this.props.ghardware,t=this.state.selectedRows,a=g.default.createElement(u.default,{onClick:this.handleMenuClick,selectedKeys:[]},g.default.createElement(u.default.Item,{key:"approval"},"\u6279\u91cf\u5f00\u542f"));return g.default.createElement(E.default,{title:"\u7535\u6e90\u5957\u9910"},g.default.createElement(d.default,{bordered:!1},g.default.createElement("div",{className:D.default.tableList},g.default.createElement("div",{style:{height:40}},g.default.createElement(C.default,{dispatch:this.props.dispatch,providerdata:e.powerInfo}),t.length>0&&g.default.createElement("div",null,g.default.createElement(n.default,{overlay:a},g.default.createElement(i.default,null,"\u66f4\u591a\u64cd\u4f5c ",g.default.createElement(o.default,{type:"down"}))))),g.default.createElement(s.default,null,"  \u7535\u6e90\u6570\u636e  "),g.default.createElement(b.default,{ghardware:e.powerInfo,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData}))))}},f=m))||f)||f);t.default=y}}]);