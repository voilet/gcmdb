(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"1F+3":function(e,t,a){e.exports={"edit-option":"antd-pro-components-access-resource-edit-modal-edit-option","edit-option-text":"antd-pro-components-access-resource-edit-modal-edit-option-text","icon-divide":"antd-pro-components-access-resource-edit-modal-icon-divide","item-text":"antd-pro-components-access-resource-edit-modal-item-text","form-item-left":"antd-pro-components-access-resource-edit-modal-form-item-left","form-item-right":"antd-pro-components-access-resource-edit-modal-form-item-right","input-value":"antd-pro-components-access-resource-edit-modal-input-value"}},BZLa:function(e,t,a){"use strict";var s=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var l=s(a("wCAj"));a("/zsF");var r=s(a("PArb"));a("+BJd");var d=s(a("mr32"));a("+L6B");var n=s(a("2/Rp")),i=s(a("q1tI")),o=s(a("osMj")),c=s(a("bghI")),u=s(a("Iq4F")),p=n.default.Group;class m extends i.default.Component{constructor(e){super(e),this.getExpandKeys=(e=>{e.forEach(e=>{1===e.has_licence&&this.selectedRowKeys.push(e.ID),e.children&&(this.expandItem.push(e.ID),this.getExpandKeys(e.children))})}),this.initExpandItem=(()=>{var e=this.state,t=e.selectedRowKeys,a=e.expandItem;this.expandItem.forEach(e=>{a.push(e)}),this.selectedRowKeys.forEach(e=>{t.push(e)}),this.setState({expandItem:a,selectedRowKeys:t})}),this.submitAssign=(()=>{this.init()}),this.cancelAssign=(()=>{this.init()}),this.init=(()=>{var e=this.state.selectedRowKeys;this.params={},this.selectedRowKeys=[],this.expandItem=[],e.splice(0,e.length),this.setState({isExpandAll:!0,visible:!1,selectedRowKeys:e,expandItem:[]})}),this.expandSwitch=(e=>{var t=[];this.expandItem.forEach(e=>{t.push(e)}),this.setState({isExpandAll:e,expandItem:e?t:[]})}),this.expandAll=(()=>{var e=this.props.resourcedata;this.getExpandKeys(e),this.initExpandItem();var t=[];this.expandItem.forEach(e=>{t.push(e)}),this.setState({isExpandAll:!0,expandItem:t})}),this.lessenAll=(()=>{this.setState({isExpandAll:!1,expandItem:[]})}),this.expandRow=((e,t)=>{var a=this.state.expandItem;if(e)a.push(t.ID);else{var s=a.indexOf(t.ID);a.splice(s,1)}this.setState({expandItem:a,isExpandAll:a.length===this.expandItem.length})}),this.state={isExpandAll:!0,expandItem:[],selectedRowKeys:[],visible:!1},this.expandItem=[],this.selectedRowKeys=[],this.params={},this.columns=[{title:"\u8d44\u6e90\u540d\u79f0",dataIndex:"name",key:"name",width:"150px"},{title:"\u7c7b\u522b",dataIndex:"rtype",key:"rtype",width:"100px",render:(e,t)=>{var a;return a=0==e?i.default.createElement(d.default,{color:"#108ee9"},"\u533a\u57df"):1==e?i.default.createElement(d.default,{color:"#009900"},"\u83dc\u5355"):i.default.createElement(d.default,{color:"#944dff"},"\u6309\u94ae"),i.default.createElement("div",null,a)}},{title:"\u5730\u5740",dataIndex:"link_url",width:"100px",key:"link_url"},{title:"\u987a\u5e8f",dataIndex:"seq",key:"seq",width:"100px",render:(e,t)=>{var a=t.seq?i.default.createElement(u.default,{seq:t.seq,dispatch:this.props.dispatch,resId:t.ID,key:t.ID}):i.default.createElement("span",null);return a}},{title:"\u64cd\u4f5c",dataIndex:"operation",key:"operation",width:"200px",render:(e,t)=>{var a=this.props,s=a.dispatch,l=a.resourcedata,r=void 0===l?[]:l,d=i.default.createElement(c.default,{dispatch:s,record:t,resource:r,key:t.ID});return d}}]}render(){var e=this.props,t=e.resourcedata,a=(e.record,this.state),s=a.expandItem;a.isExpandAll,a.visible;return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:o.default["switch-btn-block"]},i.default.createElement(p,null,i.default.createElement(n.default,{type:"primary",onClick:this.expandAll},"\u5168\u90e8\u5c55\u5f00"),i.default.createElement(n.default,{onClick:this.lessenAll},"\u5168\u90e8\u6536\u7f29")),i.default.createElement(r.default,null)),i.default.createElement("div",{className:o.default["table-block"]},i.default.createElement(l.default,{pagination:!1,columns:this.columns,dataSource:t,expandedRowKeys:s,onExpand:this.expandRow,rowKey:e=>e.ID,scroll:{y:960}})))}}var f=m;t.default=f},Iq4F:function(e,t,a){"use strict";var s=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("Pwec");var l=s(a("CtXQ"));a("/xke");var r=s(a("TeRw")),d=s(a("q1tI")),n=s(a("LNNb")),i=(e,t)=>{r.default[e]({message:"\u901a \u77e5 \u680f",description:t})};class o extends d.default.Component{constructor(e){super(e),this.showPopEdit=(()=>{this.setState({editState:!0})}),this.seqChange=(e=>{this.setState({seqValue:e.target.value})}),this.submitSeq=(()=>{var e=this.props,t=e.dispatch,a=e.seq,s=e.resId,l={seq:this.state.seqValue||a,ID:s};t({type:"gresource/modifyResourceSeq",payload:{description:l,cb:e=>{"200"==e.status?i("success","\u4fee\u6539\u8d44\u6e90\u987a\u5e8f\u6210\u529f!~ ~"):i("error","\u4fee\u6539\u8d44\u6e90\u987a\u5e8f\u5931\u8d25!~ ~")}}}),this.setState({editState:!1})}),this.cancel=(()=>{this.setState({editState:!1,seqValue:this.props.seq})}),this.state={editState:!1,seqValue:this.props.seq}}render(){var e=this.state,t=e.editState,a=e.seqValue,s=this.props.seq;return d.default.createElement("div",null,!t&&d.default.createElement("span",{onClick:this.showPopEdit,className:n.default["seq-text"]},s),t&&d.default.createElement("div",{className:n.default["pop-edit"]},d.default.createElement("input",{value:a,onChange:this.seqChange,className:n.default["pop-edit-input"]}),d.default.createElement("button",{className:n.default["btn-ok"],onClick:this.submitSeq},d.default.createElement(l.default,{type:"check",theme:"outlined"})),d.default.createElement("button",{className:n.default["btn-cancel"],onClick:this.cancel},d.default.createElement(l.default,{type:"close",theme:"outlined"}))))}}var c=o;t.default=c},LNNb:function(e,t,a){e.exports={"seq-text":"antd-pro-components-access-resource-pop-edit-seq-text","pop-edit":"antd-pro-components-access-resource-pop-edit-pop-edit","btn-ok":"antd-pro-components-access-resource-pop-edit-btn-ok","btn-cancel":"antd-pro-components-access-resource-pop-edit-btn-cancel","pop-edit-input":"antd-pro-components-access-resource-pop-edit-pop-edit-input"}},bghI:function(e,t,a){"use strict";var s=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var l=s(a("2/Rp"));a("14J3");var r=s(a("BMrR"));a("nRaC");var d=s(a("5RzL"));a("jCWc");var n=s(a("kPKH"));a("2qtc");var i=s(a("kLXV"));a("5NDa");var o=s(a("5rEg"));a("OaEy");var c=s(a("2fM7"));a("y8nQ");var u=s(a("Vl3Y")),p=s(a("q1tI")),m=s(a("1F+3")),f=u.default.Item,h=c.default.Option,E=(o.default.Search,i.default.confirm),v="\u533a\u57df\u53ea\u80fd\u662f\u4e00\u7ea7\u8282\u70b9\uff0c\u4e0d\u80fd\u6709\u7236\u8282\u70b9",x=(e,t)=>{notification[e]({message:"\u901a \u77e5 \u680f",description:t})};class b extends p.default.Component{constructor(e){super(e),this.initTreeSelect=((e,t,a)=>{(t||[]).forEach(t=>{var s={title:t.name,value:t.ID,key:t.ID};t.ID!==e&&t.children_id!==e||(s.disabled=!0),t.children&&(s.children=[],this.initTreeSelect(e,t.children,s.children)),a.push(s)})}),this.showEditModal=(()=>{this.setState({visible:!0})}),this.submitEdit=(()=>{var e=this.props.form,t=e.validateFields,a=e.getFieldsValue,s=e.setFields,l=e.getFieldValue,r=e.resetFields,d=l("type"),n=l("fatherNode"),i=this.props.dispatch,o="";if(o="area"===d?"\u533a\u57df":"menu"===d?"\u83dc\u5355":"\u6309\u94ae","area"!==d&&"no_parent"===n)s({type:{value:o,errors:[new Error(v)]}});else{var c=a();t(Object.keys(c),(e,t)=>{e||(t.url||(t.url=""),t.icon||(t.icon=""),i({type:"gresource/modifyResourcelist",payload:{description:t,cb:e=>{"200"==e.status?x("success","\u4fee\u6539\u8d44\u6e90\u6210\u529f!~ ~"):x("error","\u4fee\u6539\u8d44\u6e90\u5931\u8d25!~ ~")}}}),r(),this.closeEdit())})}}),this.closeEdit=(()=>{var e=this.props.form.resetFields;this.setState({visible:!1},()=>{e()})}),this.initType=(e=>{var t="area";return e&&0===e?t="area":e&&1===e?t="menu":e&&2===e&&(t="button"),t}),this.deleteRes=(()=>{console.log("deleteRes");var e=this.props,t=e.dispatch,a=e.record.ID;E({title:"\u8bf7\u786e\u8ba4",content:"\u60a8\u662f\u5426\u8981\u5220\u9664\u6240\u9009\u7684\u9879\uff1f",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:()=>{t({type:"gresource/deleteResourcelist",payload:{description:{resourceid:a},cb:e=>{"200"==e.status?x("success","\u5220\u9664\u8d44\u6e90\u6210\u529f!~ ~"):x("error","\u5220\u9664\u8d44\u6e90\u5931\u8d25!~ ~")}}})}})}),this.onSearch=(e=>{var t=this.props.form,a=t.getFieldValue,s=t.setFieldsValue,l=a("url"),r=this.props.dispatch;r({type:"gresource/getURLforLink",payload:{UrlFor:l,cb:e=>{var t=e.data.link_url;console.log(t),s({afterUrl:t})}}})}),this.state={visible:!1,treeData:[],newurl:""}}componentDidMount(){var e=this.props,t=e.resource,a=e.record.ID,s=[],l={title:"--\u65e0--",value:"no_parent",key:"no_parent"};s.push(l),this.initTreeSelect(a,t,s),this.setState({treeData:s})}render(){var e=this.state,t=e.visible,a=e.treeData,s=this.props,E=s.form.getFieldDecorator,v=s.record,x=v.name,b=v.rtype,y=(v.link_url,v.seq),g=v.children_id,I=v.auth_name,w=v.url_for;this.state.newurl;return p.default.createElement("div",null,p.default.createElement("div",{className:m.default["edit-option"]},p.default.createElement("span",{onClick:this.showEditModal,className:m.default["edit-option-text"]},"\u7f16\u8f91"),p.default.createElement("div",{className:m.default["icon-divide"]}),p.default.createElement("span",{onClick:this.deleteRes,className:m.default["edit-option-text"]},"\u5220\u9664")),p.default.createElement(i.default,{title:"\u7f16\u8f91\u8d44\u6e90",visible:t,onOk:this.submitEdit,onCancel:this.closeEdit,width:800},p.default.createElement("div",null,p.default.createElement(u.default,{onSubmit:this.submitEdit},p.default.createElement(r.default,null,p.default.createElement(n.default,{span:12},p.default.createElement(f,{label:"\u540d\u79f0",className:m.default["form-item-left"]},E("name",{rules:[{required:!0,message:"\u540d\u79f0\u5fc5\u586b"},{max:32,message:"\u6700\u591a\u53ef\u8f93\u516532\u4e2a\u5b57\u7b26"}],initialValue:x||""})(p.default.createElement(o.default,{placeholder:"\u957f\u5ea6\u4e0d\u8d85\u8fc732\u4e2a\u5b57\u6bb5,\u5fc5\u987b\u4f7f\u7528\u82f1\u6587"})))),p.default.createElement(n.default,{span:12},p.default.createElement(f,{label:"\u524d\u7aef\u9a8c\u8bc1\u540d\u79f0",className:m.default["form-item-left"]},E("auth_name",{rules:[{required:!0,message:"\u9a8c\u8bc1\u540d\u79f0\u5fc5\u586b"},{max:32,message:"\u6700\u591a\u53ef\u8f93\u516532\u4e2a\u5b57\u7b26"}],initialValue:I||""})(p.default.createElement(o.default,{placeholder:"\u957f\u5ea6\u4e0d\u8d85\u8fc732\u4e2a\u5b57\u6bb5"})))),p.default.createElement(n.default,{span:12},p.default.createElement(f,{label:"\u7236\u8282\u70b9",className:m.default["form-item-right"]},E("fatherNode",{initialValue:g&&0!==g?g:"no_parent"})(p.default.createElement(d.default,{treeDefaultExpandAll:!0,treeData:a}))))),p.default.createElement(r.default,null,p.default.createElement(n.default,{span:12},p.default.createElement(f,{label:"\u7c7b\u578b",className:m.default["form-item-left"]},E("type",{initialValue:this.initType(b)})(p.default.createElement(c.default,null,p.default.createElement(h,{value:"area"},"\u533a\u57df"),p.default.createElement(h,{value:"menu"},"\u83dc\u5355"),p.default.createElement(h,{value:"button"},"\u6309\u94ae"))))),p.default.createElement(n.default,{span:12},p.default.createElement(f,{label:"\u56fe\u6807",className:m.default["form-item-right"]},E("icon",{rules:[{max:32,message:"\u6700\u591a\u53ef\u8f93\u516532\u4e2a\u5b57\u7b26"}]})(p.default.createElement(o.default,{placeholder:"\u957f\u5ea6\u4e0d\u8d85\u8fc732\u4e2a\u5b57\u6bb5"}))))),p.default.createElement(r.default,null,p.default.createElement(n.default,{span:12},p.default.createElement(f,{label:"UrlFor",className:m.default["form-item-left"]},E("url_for",{initialValue:w||""})(p.default.createElement(o.default,{placeholder:"\u8bf7\u8f93\u5165\u8def\u7531\u63a7\u5236\u5668\u65b9\u6cd5\u540d"})))),p.default.createElement(n.default,{span:12},p.default.createElement(f,{label:"\u987a\u5e8f",className:m.default["form-item-right"]},E("sequence",{rules:[{required:!0,message:"\u987a\u5e8f\u5fc5\u586b"}],initialValue:y||0})(p.default.createElement(o.default,null))))),p.default.createElement(r.default,null,p.default.createElement(n.default,{span:12},p.default.createElement(f,{label:"\u7531UrlFor\u7684\u503c\u7ecf\u8fc7\u8def\u7531\u89c4\u5219\u5904\u7406\u540e\u7684\u5730\u5740",className:m.default["form-item-left"]},E("afterUrl",{initialValue:""})(p.default.createElement(o.default,{disabled:!0,className:m.default["input-value"]})),p.default.createElement(l.default,{onClick:this.onSearch,type:"primary"}," \u9a8c\u8bc1"))))))))}}var y=u.default.create({})(b);t.default=y},osMj:function(e,t,a){e.exports={activeChart:"antd-pro-components-access-resource-index-activeChart",activeChartGrid:"antd-pro-components-access-resource-index-activeChartGrid",activeChartLegend:"antd-pro-components-access-resource-index-activeChartLegend","seq-text":"antd-pro-components-access-resource-index-seq-text","switch-btn-block":"antd-pro-components-access-resource-index-switch-btn-block"}},ty3j:function(e,t,a){"use strict";var s=a("TqRt"),l=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=s(a("bx4M"));a("/zsF");var d=s(a("PArb"));a("14J3");var n=s(a("BMrR"));a("jCWc");var i,o,c,u=s(a("kPKH")),p=l(a("q1tI")),m=a("MuoO"),f=s(a("BZLa")),h=s(a("npf6")),E=s(a("NPSK")),v=(i=(0,m.connect)(e=>e),i((c=class extends p.PureComponent{constructor(){super(...arguments),this.state={expandForm:!1,selectedRows:[],formValues:{},resourcedata:[],parentdata:[]},this.handleRefreshTableChange=(()=>{var e=this.props.dispatch;e({type:"gproline/getProjectLine",payload:""})}),this.toggleForm=(()=>{this.setState({expandForm:!this.state.expandForm})}),this.handleSelectRows=(e=>{this.setState({selectedRows:e})})}componentDidMount(){var e=this.props.dispatch;e({type:"gresource/getResourcelist"}),e({type:"gresource/getResourceTreeForparent",payload:{cb:e=>{this.setState({parentdata:e.data})}}})}render(){var e=this.state,t=e.selectedRows,a=e.parentdata,s=this.props,l=s.gresource,i=s.dispatch;return console.log("this.props",this.props),p.default.createElement(r.default,{bordered:!1},p.default.createElement("div",{className:E.default.tableList},p.default.createElement("div",{className:E.default.tableListOperator},p.default.createElement(n.default,{gutter:16},p.default.createElement(u.default,{span:2},p.default.createElement(h.default,{dispatch:i,resource:a})))),p.default.createElement(d.default,null," \u8d44\u6e90\u5217\u8868 "),p.default.createElement(f.default,{selectedRows:t,dispatch:i,handleSaveData:this.handleSaveData,handleDeleteData:this.handleDeleteData,resourcedata:l.data,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))}},o=c))||o);t.default=v}}]);