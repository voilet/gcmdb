(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[49],{"pp0/":function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var s=l(a("bx4M"));a("14J3");var d=l(a("BMrR"));a("jCWc");var u=l(a("kPKH"));a("+L6B");var i=l(a("2/Rp"));a("OaEy");var o=l(a("2fM7"));a("Q9mQ");var n=l(a("diRs")),f=l(a("pVnL"));a("MXD1");var c=l(a("CFYs")),p=l(a("MVZn"));a("miYZ");var m=l(a("tsqr"));a("lUTK");var h=l(a("BvKs"));a("7Kak");var g=l(a("9yH6"));a("5NDa");var v=l(a("5rEg"));a("y8nQ");var E,w,b,y,k=l(a("Vl3Y")),V=r(a("q1tI")),P=a("MuoO"),S=a("7DNP"),x=(l(a("usdK")),a("LLXN"),l(a("mOP9")),l(a("v99g")),l(a("0evu"))),I=a("+n12"),_=k.default.Item,q=v.default.Group,z=g.default.Group,C=v.default.TextArea,M=(h.default.Item,(e,t)=>{m.default[e](t,2)}),N={ok:V.default.createElement("div",{className:x.default.success},"\u5f3a\u5ea6\uff1a\u5f3a"),pass:V.default.createElement("div",{className:x.default.warning},"\u5f3a\u5ea6\uff1a\u4e2d"),poor:V.default.createElement("div",{className:x.default.error},"\u5f3a\u5ea6\uff1a\u592a\u77ed")},F={ok:"success",pass:"normal",poor:"exception"},T=(E=(0,P.connect)(e=>{var t=e.user;return{currentUser:t.currentUser,userInfo:t.userInfo}}),w=k.default.create(),E(b=w((y=class extends V.PureComponent{constructor(e){super(e),this.state={help:"",helpVisible:!1},this.handleSubmit=(e=>{e.preventDefault();var t=this.props,a=t.form,l=t.dispatch;t.userInfo;a.validateFields({force:!0},(e,t)=>{console.log("values:",t),e||l({type:"user/modifyUserInfo",payload:(0,p.default)({},t,{callback:e=>{M("success","\u4fee\u6539\u6210\u529f"),setTimeout(()=>{l(S.routerRedux.push({pathname:"/account/info"}))},200)}})})})}),this.getPasswordStatus=(()=>{var e=this.props.form,t=e.getFieldValue("password1");return t&&t.length>9?"ok":t&&t.length>5?"pass":"poor"}),this.checkConfirm=((e,t,a)=>{if(t){var l=this.props.form;t&&t!==l.getFieldValue("password1")?a("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u5339\u914d!"):a()}else a()}),this.checkPassword=((e,t,a)=>{var l=this.state,r=l.visible,s=l.confirmDirty;if(t)if(t)if(this.setState({help:""}),r||this.setState({helpVisible:!!t}),t.length<6)a("error");else{var d=this.props.form;t&&s&&d.validateFields(["password2"],{force:!0}),a()}else this.setState({help:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01",helpVisible:!!t}),a("error");else a()}),this.changePrefix=(e=>{this.setState({prefix:e})}),this.renderPasswordProgress=(()=>{var e=this.props.form,t=e.getFieldValue("password1"),a=this.getPasswordStatus();return t&&t.length?V.default.createElement("div",{className:x.default[`progress-${a}`]},V.default.createElement(c.default,{status:F[a],className:x.default.progress,strokeWidth:6,percent:10*t.length>100?100:10*t.length,showInfo:!1})):null}),console.log("props",this.props)}componentWillMount(){var e=this.props.dispatch;e({type:"user/fetchUserInfo",payload:{callback:e=>{console.log("data...",e)}}})}render(){var e=this.props,t=e.form,a=e.submitting,l=e.userInfo,r=this.state,c=r.help,p=r.helpVisible;console.log("this.prop:",this.props);var m="";l&&(m=l.google_token||location.href.toString()),console.log("token",m);var h=t.getFieldDecorator,E={labelCol:{span:6},wrapperCol:{span:18}};return V.default.createElement(s.default,{className:x.default.userInfo},V.default.createElement("div",null,V.default.createElement("h3",null,l.first_name,"\u7684\u4e2a\u4eba\u4fe1\u606f"),V.default.createElement(d.default,{gutter:24},V.default.createElement(u.default,{xs:24,md:16},V.default.createElement(k.default,{onSubmit:this.handleSubmit},V.default.createElement(_,(0,f.default)({label:"\u7528\u6237\u540d\uff1a"},E),V.default.createElement(v.default,{size:"large",placeholder:"\u7528\u6237\u540d",value:l.username,disabled:!0})),V.default.createElement(_,(0,f.default)({label:"\u59d3\u540d",required:!1},E),h("first_name",{initialValue:l.first_name})(V.default.createElement(v.default,{size:"large",placeholder:"\u59d3\u540d"}))),V.default.createElement(_,(0,f.default)({label:"\u5bc6\u7801",required:!1,help:c},E),V.default.createElement(n.default,{content:V.default.createElement("div",{style:{padding:"4px 0"}},N[this.getPasswordStatus()],this.renderPasswordProgress(),V.default.createElement("div",{style:{marginTop:10}},"\u8bf7\u81f3\u5c11\u8f93\u5165 6 \u4e2a\u5b57\u7b26\u3002\u8bf7\u4e0d\u8981\u4f7f\u7528\u5bb9\u6613\u88ab\u731c\u5230\u7684\u5bc6\u7801\u3002")),overlayStyle:{width:240},placement:"right",visible:p},h("password1",{initialValue:"",rules:[{validator:this.checkPassword}]})(V.default.createElement(v.default,{size:"large",type:"password",placeholder:"\u81f3\u5c116\u4f4d\u5bc6\u7801\uff0c\u533a\u5206\u5927\u5c0f\u5199"})))),V.default.createElement(_,(0,f.default)({label:"\u786e\u8ba4\u5bc6\u7801",required:!1},E),h("password2",{initialValue:"",rules:[{required:!1,message:"\u8bf7\u786e\u8ba4\u5bc6\u7801\uff01"},{validator:this.checkConfirm}]})(V.default.createElement(v.default,{size:"large",type:"password",placeholder:"\u786e\u8ba4\u5bc6\u7801"}))),V.default.createElement(_,(0,f.default)({label:"SSH\u516c\u94a5"},E),h("ssh_pub",{initialValue:l.ssh_pub||"",rules:[{required:!1}]})(V.default.createElement(C,{rows:4}))),V.default.createElement(_,(0,f.default)({label:"\u90ae\u7bb1"},E),h("email",{initialValue:l.email,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740\uff01"},{type:"email",message:"\u90ae\u7bb1\u5730\u5740\u683c\u5f0f\u9519\u8bef\uff01"}]})(V.default.createElement(v.default,{size:"large",placeholder:"\u90ae\u7bb1"}))),V.default.createElement(_,(0,f.default)({label:"\u624b\u673a\u53f7"},E),V.default.createElement(q,{compact:!0},V.default.createElement(o.default,{size:"large",value:"86",onChange:this.changePrefix,style:{width:"25%"}},V.default.createElement(Option,{value:"86"},"+86")),h("phone",{initialValue:l.mobile,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\uff01"},{pattern:/^1\d{10}$/,message:"\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\uff01"}]})(V.default.createElement(v.default,{size:"large",style:{width:"75%"},placeholder:"11\u4f4d\u624b\u673a\u53f7"})))),V.default.createElement(_,(0,f.default)({label:"\u5821\u5792\u673a",name:"token_password"},E),h("token_password",{initialValue:l.token_passwd?1:0})(V.default.createElement(z,{compact:!0},V.default.createElement(g.default,{value:1},"password+token"),V.default.createElement(g.default,{value:0},"token&&password")))),V.default.createElement(_,E,V.default.createElement(i.default,{size:"large",loading:a,type:"primary",htmlType:"submit"},"\u4fdd\u5b58")))),V.default.createElement(u.default,{xs:24,md:8},V.default.createElement("div",{style:{textAlign:"center"},dangerouslySetInnerHTML:{__html:(0,I.QRCode)({text:m})}})))))}},b=y))||b)||b);t.default=T}}]);