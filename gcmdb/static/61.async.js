(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[61],{"5s2z":function(e,t,a){"use strict";var l=a("TqRt"),d=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var r=l(a("bx4M"));a("g9YV");var n=l(a("wCAj"));a("/zsF");var s=l(a("PArb"));a("giR+");var i=l(a("fyUT")),u=l(a("pVnL"));a("5NDa");var c=l(a("5rEg"));a("14J3");var f=l(a("BMrR"));a("jCWc");var h=l(a("kPKH"));a("P2fV");var o=l(a("NJEC"));a("+L6B");var m=l(a("2/Rp"));a("BoS7");var p=l(a("Sdc0"));a("Pwec");var y=l(a("CtXQ")),E=l(a("MVZn"));a("/xke");var b=l(a("TeRw"));a("y8nQ");var g=l(a("Vl3Y"));a("OaEy");var v,S,w,k,C=l(a("2fM7")),x=d(a("q1tI")),I=l(a("TXgB")),D=(l(a("Y+p1")),a("7DNP")),V=a("MuoO"),F=C.default.Option,_=g.default.Item,B=0,O=0,L=(e,t)=>{b.default[e]({message:"Notification Title",description:t})},N=(v=(0,V.connect)(e=>e),S=g.default.create(),v(w=S((k=class extends x.PureComponent{constructor(){super(...arguments),this.state={modalVisible:!1,disabled:!0,cabinetdata:[],baydata:[],idc:[],haspower:!1,addable:!1,baystatus:!1,onSubmit:!1},this.handleSubmit=(e=>{var t=this.props.dispatch,a=this.props.form,l=this.state.baydata;e.preventDefault(),a.validateFields((e,d)=>{if(!e){var r={title:a.getFieldValue("title")?a.getFieldValue("title"):"",power:a.getFieldValue("power")?a.getFieldValue("power"):"",idcid:a.getFieldValue("idcid")?a.getFieldValue("idcid"):"",cableport:a.getFieldValue("cableport")?a.getFieldValue("cableport"):"",capacity:a.getFieldValue("capacity")?a.getFieldValue("capacity"):"",status:this.state.haspower?"1":"0",bay_details:JSON.stringify(l)};t({type:"gidc/addCabinet",payload:(0,E.default)({},r,{cb:e=>{"200"==e.status?(L("success",e.msg),this.setState({baydata:[],haspower:!1,addable:!1,baystatus:!1,onSubmit:!0}),a.resetFields()):L("error",e.msg)}})})}})}),this.handleAdd=(()=>{var e=this.state.baydata,t={ID:++O,bay_name:"bay"+B++,host_ip:"\u7a7a (\u65e0\u6cd5\u76f4\u63a5\u4fee\u6539,\u8bf7\u5728\u4e3b\u673a\u5217\u8868\u5173\u8054\u4fee\u6539)",host_sn:"\u7a7a",height:"2U",height_id:2,status:!1,checked:!1};this.setState({baydata:[...e,t],addable:!0})}),this.handleStatusChange=(e=>{this.setState({haspower:e})}),this.handleBayStatusChange=((e,t,a)=>{var l=[...this.state.baydata],d=l.filter(e=>t===e.ID)[0];d&&(d[a]=e,this.setState({data:l}))}),this.handleSelectLineValue=((e,t,a)=>{var l=[...this.state.baydata],d=l.filter(e=>t===e.ID)[0];d&&(d[a]=e,this.setState({data:l}))}),this.confirmDelete=(e=>{var t=[...this.state.baydata],a=t.filter(t=>e===t.ID)[0];if(a){var l=t.indexOf(a);l>-1&&t.splice(l,1),a.tag=!1,this.setState({baydata:t}),this.cacheData=t.map(e=>(0,E.default)({},e))}}),this.confirmSave=(e=>{var t=[...this.state.baydata],a=t.filter(t=>e===t.ID)[0];a&&(a["checked"]=!0,this.setState({data:t}),this.cacheData=t.map(e=>(0,E.default)({},e)))}),this.reback=(()=>{var e=this.props.dispatch;e({type:"gidc/empty"}),e(D.routerRedux.push({pathname:"/resource/idc/cabinet/list"}))}),this.handleSelectChange=(e=>{this.setState({onSubmit:!1}),this.props.form.setFieldsValue({idcid:e})})}componentWillMount(){var e=this.props.dispatch;e({type:"gidc/queryAllIDC",payload:{cb:e=>{"200"==e.status&&this.setState({idc:e.data})}}})}handleChange(e,t,a){var l=[...this.state.data],d=l.filter(e=>t===e.ID)[0];d&&(d[a]=e,this.setState({data:l}))}render(){this.state.cabinetdata;var e=this.props.form.getFieldDecorator,t={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},a=[{title:"\u673a\u67b6\u540d\u79f0",dataIndex:"bay_name",width:"100px",editable:!0},{title:"\u673a\u67b6\u9ad8\u5ea6",dataIndex:"height",width:"50px",render:(e,t)=>{return x.default.createElement(C.default,{defaultValue:e,disabled:t.selectStatus,style:{width:"150px"},onChange:e=>this.handleSelectLineValue(e,t.ID,"height_id")},x.default.createElement(F,{key:"1",value:"1"},"1U"),x.default.createElement(F,{key:"2",value:"2"},"2U"),x.default.createElement(F,{key:"3",value:"3"},"4U"),x.default.createElement(F,{key:"4",value:"4"},"8U"))}},{title:"\u670d\u52a1\u5668IP",dataIndex:"host_ip",width:"100px",render:(e,t)=>{var a=t.host_ip,l={color:"red"};return x.default.createElement("div",{style:l},a)}},{title:"\u670d\u52a1\u5668\u5e8f\u5217\u53f7",dataIndex:"host_sn",width:"100px",render:(e,t)=>{var a=t.host_sn,l={color:"red"};return x.default.createElement("div",{style:l},a)}},{title:"\u72b6\u6001",dataIndex:"checked",width:"50px",render:(e,t)=>{return t.checked?x.default.createElement(y.default,{type:"check",style:{fontSize:16,color:"#228B22"}}):x.default.createElement(y.default,{type:"close",style:{fontSize:16,color:"#FF0000"}})}},{title:"\u673a\u67b6\u7a7a\u95f2\u72b6\u6001",dataIndex:"status",width:"50px",render:(e,t)=>{var a=t.status;return console.log(a),x.default.createElement("div",null,x.default.createElement(p.default,{checkedChildren:"\u5360\u7528",unCheckedChildren:"\u7a7a\u95f2",checked:a,onChange:e=>this.handleBayStatusChange(e,t.ID,"status")}))}},{title:"\u64cd\u4f5c",dataIndex:"ID",key:"ID",className:`${I.default.tableOperation}`,width:"200px",render:(e,t)=>{return x.default.createElement("div",{className:"editable-row-operations"},x.default.createElement("span",{style:{marginLeft:20}},x.default.createElement("a",{onClick:()=>this.confirmSave(t.ID)},x.default.createElement(m.default,null,"\u4fdd\u5b58"))),x.default.createElement("span",null,x.default.createElement(o.default,{title:"\u786e\u5b9a\u5220\u9664?",onConfirm:()=>this.confirmDelete(t.ID)},x.default.createElement("a",{style:{marginLeft:20}},x.default.createElement(m.default,{type:"danger"},"\u5220\u9664")))))}}];return x.default.createElement(r.default,{bordered:!1},x.default.createElement(f.default,{gutter:24,style:{marginBottom:32}},x.default.createElement(h.default,{span:24,key:2,style:{display:"block",fontSize:20}},"\u673a\u67dc\u4fe1\u606f")),x.default.createElement(g.default,{className:"ant-advanced-search-form",onSubmit:this.handleSubmit},x.default.createElement(f.default,{gutter:24},x.default.createElement(h.default,{span:12},x.default.createElement(_,(0,u.default)({label:"\u673a\u67dc\u540d\u79f0"},t),e("title")(x.default.createElement(c.default,null)))),x.default.createElement(h.default,{span:12},x.default.createElement(_,(0,u.default)({label:"\u673a\u67dc\u7535\u91cf"},t),e("power")(x.default.createElement(c.default,null))))),x.default.createElement(f.default,{gutter:24},x.default.createElement(h.default,{span:12},x.default.createElement(_,(0,u.default)({label:"\u6240\u5c5e\u673a\u623f"},t),e("idcid")(x.default.createElement(C.default,{showSearch:!0,style:{width:264},onChange:this.handleSelectChange,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},this.state.idc.map((e,t)=>{return x.default.createElement(F,{key:t,value:e.ID},e.idc_name)}))))),x.default.createElement(h.default,{span:12},x.default.createElement(_,(0,u.default)({label:"\u7f51\u53e3\u6570"},t),e("cableport")(x.default.createElement(i.default,{min:1,max:100}))))),x.default.createElement(f.default,{gutter:24},x.default.createElement(h.default,{span:12},x.default.createElement(_,(0,u.default)({label:"\u673a\u67dc\u5bb9\u91cf"},t),e("capacity")(x.default.createElement(i.default,{min:1,max:100})))),x.default.createElement(h.default,{span:12},x.default.createElement(_,(0,u.default)({label:"\u673a\u67dc\u72b6\u6001"},t),x.default.createElement(p.default,{checkedChildren:"\u901a\u7535",unCheckedChildren:"\u672a\u901a\u7535",checked:this.state.haspower,onChange:e=>this.handleStatusChange(e)})))),x.default.createElement(f.default,{gutter:24},x.default.createElement(h.default,{span:12},x.default.createElement(_,(0,u.default)({label:"\u7a7a\u95f2\u673a\u67b6"},t))),x.default.createElement(h.default,{span:12},x.default.createElement(_,(0,u.default)({label:"\u7a7a\u95f2\u7f51\u53e3"},t)))),x.default.createElement(s.default,{style:{marginBottom:32}}),x.default.createElement(f.default,{gutter:24,style:{marginBottom:32}},x.default.createElement(h.default,{span:24,key:2,style:{display:"block",fontSize:20}},"\u673a\u67b6\u4fe1\u606f")),x.default.createElement(f.default,{gutter:24,style:{marginBottom:32}},x.default.createElement(h.default,{span:24,key:2,style:{display:"block"}},x.default.createElement(m.default,{type:"danger",onClick:this.handleAdd,style:{width:"15%"}},x.default.createElement(y.default,{type:"plus-square"})," \u6dfb\u52a0\u673a\u67b6"))),x.default.createElement(f.default,null,x.default.createElement(n.default,{rowKey:e=>e.bay_name,style:{marginBottom:24},bordered:!0,dataSource:this.state.baydata,columns:a})),x.default.createElement(f.default,{gutter:24,style:{marginBottom:32}},x.default.createElement(h.default,{span:24,style:{textAlign:"left"}},x.default.createElement(m.default,{type:"primary",onClick:this.handleSubmit,disabled:this.state.onSubmit},"\u63d0\u4ea4"),x.default.createElement(s.default,{type:"vertical"}),x.default.createElement(m.default,{onClick:()=>this.reback()},"\u8fd4\u56de")))))}},w=k))||w)||w);t.default=N}}]);