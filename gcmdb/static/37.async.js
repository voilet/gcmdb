(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{KbiD:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var s=l(a("kLXV"));a("BoS7");var i=l(a("Sdc0"));a("giR+");var o=l(a("fyUT")),d=l(a("pVnL"));a("miYZ");var n=l(a("tsqr"));a("7Kak");var u=l(a("9yH6"));a("5NDa");var p=l(a("5rEg"));a("OaEy");var h=l(a("2fM7"));a("y8nQ");var c,f,m,g,b=l(a("Vl3Y")),E=r(a("q1tI")),v=a("MuoO"),y=(l(a("mR73")),b.default.Item),I=(h.default.Option,p.default.TextArea),k=(u.default.Group,c=(0,v.connect)(e=>e),f=b.default.create(),c(m=f((g=class extends E.PureComponent{constructor(){super(...arguments),this.state={modalVisible:this.props.visible,showFormProline:!0,selectedGroupValue:0,currentVersion:"",enable:!0},this.handleAdd=(()=>{var e=this.props.form,t=this.props.formData||{};e.validateFields((a,l)=>{console.log("values",l),a||(l.enable=l.enable?1:0,this.props.dispatch({type:"gproline/addProjectItem",payload:{ID:t.ID,fields:l,callback:a=>{n.default.success("\u6dfb\u52a0\u6210\u529f"),this.props.onUpdate&&this.props.onUpdate(t),e.resetFields()}}}))})}),this.handleSelectLineValue=(e=>{console.log(e),this.props.dispatch({type:"gproline/getProjectGroupbyId",payload:e})}),this.handleSelectGroupValue=(e=>{this.setState({selectedGroupValue:e})}),this.handleStatusChange=(e=>{this.setState({enable:e})}),this.handleVersoinChange=(e=>{})}componentWillReceiveProps(e){this.setState({modalVisible:e.modalVisible})}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=(t.submitting,t.form,t.dispatch,t.progroupdata,t.gproline,{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}}),l=this.props.formData||{};function r(e){console.log("changed",e)}return this.state.currentVersion?[this.state.currentVersion]:[""],E.default.createElement("div",null,E.default.createElement(s.default,{title:"\u6dfb\u52a0\u9879\u76ee",visible:this.props.modalVisible,onOk:this.handleAdd,width:600,onCancel:()=>this.props.onCancel()},E.default.createElement(y,(0,d.default)({},a,{label:"\u9879\u76ee\u540d\u79f0"}),e("pro",{initialValue:l.pro,rules:[{required:!0,message:"\u9879\u76ee\u540d\u79f0"}]})(E.default.createElement(p.default,{placeholder:"\u9879\u76ee\u540d\u79f0",disabled:!0}))),E.default.createElement(y,(0,d.default)({},a,{label:"\u53d1\u5e03\u9879\u540d\u79f0"}),e("title",{initialValue:l.title||"",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u53d1\u5e03\u9879\u6807\u9898"}]})(E.default.createElement(p.default,{placeholder:"\u8bf7\u8f93\u5165\u53d1\u5e03\u9879\u6807\u9898"}))),E.default.createElement(y,(0,d.default)({},a,{label:"\u53d1\u5e03\u811a\u672c"}),e("release",{initialValue:l.release,rules:[{required:!0,message:"\u53d1\u5e03\u811a\u672c"}]})(E.default.createElement(I,{style:{minHeight:32},placeholder:"",rows:4}))),E.default.createElement(y,(0,d.default)({},a,{label:"\u53d1\u5e03\u53c2\u6570"}),e("release_args",{initialValue:l.release_args||"",rules:[{required:!1,message:"\u53d1\u5e03\u811a\u672c"}]})(E.default.createElement(p.default,{placeholder:"\u53d1\u5e03\u53c2\u6570\u591a\u4e2a\u53c2\u6570\u7528|\u7ebf\u5206\u5272"}))),E.default.createElement(y,(0,d.default)({},a,{label:"\u53d1\u5e03\u8d85\u65f6\u65f6\u95f4"}),e("release_timeout",{initialValue:l.release_timeout,rules:[{required:!1,message:"\u53d1\u5e03\u811a\u672c"}]})(E.default.createElement("div",null,E.default.createElement(o.default,{min:1,max:600,defaultValue:300,onChange:r}),"\uff08\u5355\u4f4d: \u79d2\uff09"))),E.default.createElement(y,(0,d.default)({},a,{label:"\u56de\u9000\u811a\u672c"}),e("rollback",{initialValue:l.rollback,rules:[{required:!1,message:"\u56de\u9000\u811a\u672c"}]})(E.default.createElement(I,{style:{minHeight:32},placeholder:"",rows:4}))),E.default.createElement(y,(0,d.default)({},a,{label:"\u56de\u9000\u53c2\u6570"}),e("rollback_args",{initialValue:l.rollback_args||"",rules:[{required:!1,message:"\u56de\u9000\u811a\u672c\u53c2\u6570"}]})(E.default.createElement(p.default,{placeholder:"\u56de\u9000\u811a\u672c\u53c2\u6570\u591a\u4e2a\u53c2\u6570\u7528|\u7ebf\u5206\u5272"}))),E.default.createElement(y,(0,d.default)({},a,{label:"\u56de\u9000\u8d85\u65f6\u65f6\u95f4"}),e("rollback_timeout",{initialValue:l.rollback_timeout,rules:[{required:!1,message:"\u53d1\u5e03\u811a\u672c"}]})(E.default.createElement("div",null,E.default.createElement(o.default,{min:1,max:600,defaultValue:300,onChange:r}),"\uff08\u5355\u4f4d: \u79d2\uff09"))),E.default.createElement(y,(0,d.default)({},a,{label:"\u662f\u5426\u542f\u7528"}),e("enable",{initialValue:l.enable})(E.default.createElement(i.default,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",onChange:e=>this.handleStatusChange(e)})))))}},m=g))||m)||m);t.default=k},QQ7z:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("8R5B");var s=l(a("aJyg"));a("14J3");var i=l(a("BMrR"));a("jCWc");var o=l(a("kPKH"));a("2qtc");var d=l(a("kLXV")),n=l(a("MVZn"));a("7Kak");var u=l(a("9yH6"));a("5NDa");var p=l(a("5rEg"));a("OaEy");var h=l(a("2fM7"));a("y8nQ");var c,f,m,g,b=l(a("Vl3Y")),E=r(a("q1tI")),v=a("MuoO"),y=(l(a("mR73")),b.default.Item,h.default.Option,p.default.TextArea,u.default.Group,c=(0,v.connect)(e=>e),f=b.default.create(),c(m=f((g=class extends E.PureComponent{constructor(){super(...arguments),this.state={modalVisible:this.props.visible,mode:1,loading:!1,tableData:[],formData:{},currentEditId:0,hosts:{},targetKeys:[]},this.updateHostData=(e=>{if(e){var t=e.hosts,a=[],l=[];t.carving_host&&t.carving_host.forEach(e=>{a.push((0,n.default)({},e,{key:e.ID}))}),t.project_host&&t.project_host.forEach(e=>{a.push((0,n.default)({},e,{key:e.ID})),l.push(parseInt(e.ID))}),this.setState({hosts:a,targetKeys:l})}}),this.handleCancel=(()=>{2==this.state.mode?this.setState({mode:1}):this.props.onCancel()}),this.handleSubmit=(()=>{var e={},t=this.state.hosts||[],a=this.state.targetKeys||[],l=this.state.tableData;e.carving_host=[],e.project_host=[];for(var r=0;r<t.length;r++)-1!=a.indexOf(t[r].ID)?e.project_host.push(t[r]):e.carving_host.push(t[r]);this.props.dispatch({type:"gproline/updateAllHostsByProId",payload:{ProId:l.ID,data:e,callback:e=>{this.props.onUpdate&&this.props.onUpdate(e)}}})}),this.handlerDelete=(e=>{var t=this.state.tableData;console.log("\u5220\u9664\u6570\u636e",e,"\u9879\u76eeID",t.ID),this.props.dispatch({type:"gproline/deleteVersionById",payload:{ProId:t.ID,ID:e.ID,callback:e=>{this.props.onUpdate&&this.props.onUpdate(t)}}})}),this.handlerModify=(e=>{console.log("\u4fee\u6539\u6570\u636e:",e)}),this.handleStatusChange=(e=>{}),this.handleChange=((e,t,a)=>{this.setState({targetKeys:e})}),this.renderItem=(e=>{var t=E.default.createElement("span",{className:"custom-item"},e.eth1," - ",e.fqdn);return{label:t,value:e.title}})}componentWillReceiveProps(e){this.setState({modalVisible:e.modalVisible,tableData:e.tableData?e.tableData:{}}),e.tableData&&this.updateHostData(e.tableData),e.modalVisible||this.setState({mode:1})}renderColumns(e,t,a){return E.default.createElement("div",null,e)}render(){this.props.form.getFieldDecorator;var e=this.props,t=(e.submitting,e.form,e.dispatch,e.gproline,this.state),a=(t.loading,t.tableData,t.formData);if(1!=this.state.mode)return E.default.createElement("div",null,E.default.createElement(d.default,{title:a.ID?"\u4fee\u6539\u4e3b\u673a":"\u6dfb\u52a0\u4e3b\u673a",visible:this.props.modalVisible,onOk:this.handleSubmit,width:600,onCancel:()=>this.handleCancel()},E.default.createElement("div",null,"nonthing")));var l=document.documentElement.clientWidth;return l=l<=1e3?(l-120)/2:450,E.default.createElement("div",null,E.default.createElement(d.default,{title:"\u4e3b\u673a\u5217\u8868",visible:this.props.modalVisible,onOk:this.handleSubmit,width:1e3,onCancel:()=>this.handleCancel(),ref:"a"},E.default.createElement(i.default,{gutter:24},E.default.createElement(o.default,{xs:12},"\u53d1\u5e03\u9879\u4e3b\u673a"),E.default.createElement(o.default,{xs:12},"\u9879\u76ee\u4e3b\u673a")),E.default.createElement(s.default,{listStyle:{width:l,height:300},dataSource:this.state.hosts,targetKeys:this.state.targetKeys,onChange:this.handleChange,render:this.renderItem})))}},m=g))||m)||m);t.default=y},"WNx+":function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var s=l(a("wCAj"));a("+L6B");var i=l(a("2/Rp"));a("2qtc");var o=l(a("kLXV"));a("BoS7");var d=l(a("Sdc0")),n=l(a("pVnL"));a("Pwec");var u=l(a("CtXQ"));a("7Kak");var p=l(a("9yH6"));a("5NDa");var h=l(a("5rEg"));a("OaEy");var c=l(a("2fM7"));a("y8nQ");var f,m,g,b,E=l(a("Vl3Y")),v=r(a("q1tI")),y=a("MuoO"),I=(l(a("mR73")),E.default.Item),k=(c.default.Option,h.default.TextArea),C=p.default.Group,D=(f=(0,y.connect)(e=>e),m=E.default.create(),f(g=m((b=class extends v.PureComponent{constructor(){super(...arguments),this.state={modalVisible:this.props.visible,mode:1,loading:!1,tableData:[],formData:{},currentEditId:0},this.handleCancel=(()=>{2==this.state.mode?this.setState({mode:1}):this.props.onCancel()}),this.handleSubmit=(()=>{var e=this.props.form,t=this.props.dispatch,a=this.state.tableData,l=a.versions;1==this.state.mode?(this.setState({modalVisible:!1}),this.props.onCancel()):e.validateFields((e,r)=>{console.log("values",r),e||t({type:"gproline/addConfigVersion",payload:{fields:r,ID:a.ID,callback:e=>{l.push(e),this.setState({mode:1,tableData:a}),this.forceUpdate(),this.props.onUpdate&&this.props.onUpdate(a)}}})})}),this.handlerModify=(e=>{console.log("\u4fee\u6539\u6570\u636e:",e),this.setState({mode:2,formData:e})}),this.handlerDelete=(e=>{var t=this.state.tableData;console.log("\u5220\u9664\u6570\u636e",e,"\u9879\u76eeID",t.ID),this.props.dispatch({type:"gproline/deleteVersionById",payload:{ProId:t.ID,ID:e.ID,callback:e=>{this.props.onUpdate&&this.props.onUpdate(t)}}})})}componentWillReceiveProps(e){this.setState({modalVisible:e.modalVisible,tableData:e.tableData?e.tableData:{}}),e.modalVisible||this.setState({mode:1})}renderColumns(e,t,a){return v.default.createElement("div",null,e)}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=(t.submitting,t.form,t.dispatch,t.progroupdata,t.gproline,this.state),l=a.loading,r=a.tableData,c=a.formData,f=r.versions;c&&c.ID||(c={title:"",enable:1,auto:0,reset:0,remarks:""});var m=[{title:"\u6807\u9898",dataIndex:"title",key:"title",render:(e,t)=>this.renderColumns(e,t,"title")},{title:"\u7248\u672c\u53f7",dataIndex:"release_version",key:"release_version",render:(e,t)=>this.renderColumns(e,t,"release_version")},{title:"\u53d1\u5e03/\u56de\u9000",dataIndex:"reset",key:"reset",render:(e,t)=>{return t.reset?v.default.createElement(u.default,{type:"like",theme:"twoTone",twoToneColor:"#52c41a"}):v.default.createElement(u.default,{type:"dislike",theme:"twoTone",twoToneColor:"#eb2f96"})}},{title:"\u72b6\u6001",dataIndex:"enable",key:"enable",render:(e,t)=>{return t.enable?v.default.createElement(u.default,{type:"check"}):v.default.createElement(u.default,{type:"stop"})}},{title:"\u81ea\u52a8/\u624b\u52a8",dataIndex:"auto",key:"auto",render:(e,t)=>{return t.auto?v.default.createElement(u.default,{type:"sync"}):v.default.createElement(u.default,{type:"user"})}},{title:"\u8bf4\u660e",dataIndex:"remarks",key:"remarks",render:(e,t)=>{return v.default.createElement("div",null,e)}},{title:"\u64cd\u4f5c",dataIndex:"utils",key:"utils",render:(e,t)=>{return v.default.createElement(u.default,{type:"delete",theme:"twoTone",onClick:()=>{this.handlerDelete(t)},twoToneColor:"#f35553"})}}],g={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return 1!=this.state.mode?v.default.createElement("div",null,v.default.createElement(o.default,{title:"\u6dfb\u52a0\u7248\u672c",visible:this.props.modalVisible,onOk:this.handleSubmit,width:600,onCancel:()=>this.handleCancel()},v.default.createElement(I,(0,n.default)({},g,{label:"\u6807\u9898"}),e("title",{initialValue:c.release_version,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6807\u9898"}]})(v.default.createElement(h.default,{placeholder:"\u4e00\u53e5\u8bdd\u6807\u9898"}))),v.default.createElement(I,(0,n.default)({},g,{label:"\u7248\u672c\u53f7"}),e("release",{initialValue:c.release_version,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7248\u672c\u53f7"}]})(v.default.createElement(h.default,{placeholder:"Git\u7684HASH\u503c\u6216\u9879\u76ee\u7248\u672c\u53f7"}))),v.default.createElement(I,(0,n.default)({},g,{label:"\u5f53\u524d\u7248\u672c\u662f\u5426\u53ef\u7528"}),e("enable",{initialValue:c.enable?1:0})(v.default.createElement(d.default,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed"}))),v.default.createElement(I,(0,n.default)({},g,{label:"\u66f4\u65b0\u65b9\u5f0f"}),e("auto",{initialValue:c.auto?1:0})(v.default.createElement(C,{compact:!0},v.default.createElement(p.default,{value:0},"\u624b\u52a8"),v.default.createElement(p.default,{value:1},"\u81ea\u52a8")))),v.default.createElement(I,(0,n.default)({label:"\u811a\u672c\u7c7b\u578b",name:"token_password"},g),e("reset",{initialValue:c.reset?0:1})(v.default.createElement(C,{compact:!0},v.default.createElement(p.default,{value:0},"\u56de\u6eda"),v.default.createElement(p.default,{value:1},"\u53d1\u5e03")))),v.default.createElement(I,(0,n.default)({},g,{label:"\u66f4\u65b0\u8bf4\u660e"}),e("remarks",{initialValue:c.remarks})(v.default.createElement(k,{style:{minHeight:32},placeholder:"",rows:4}))))):v.default.createElement("div",null,v.default.createElement(o.default,{title:"\u7248\u672c\u7ba1\u7406",visible:this.props.modalVisible,onOk:this.handleSubmit,width:1e3,onCancel:()=>this.handleCancel()},v.default.createElement(i.default,{onClick:()=>{this.handlerModify()}},"\u6dfb\u52a0\u7248\u672c"),v.default.createElement(s.default,{loading:l,rowKey:e=>e.ID,dataSource:f,columns:m,pagination:!0})))}},g=b))||g)||g);t.default=D},cbLR:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var s=l(a("wCAj"));a("+L6B");var i=l(a("2/Rp"));a("2qtc");var o=l(a("kLXV"));a("BoS7");var d=l(a("Sdc0"));a("giR+");var n=l(a("fyUT")),u=l(a("pVnL"));a("P2fV");var p=l(a("NJEC"));a("Pwec");var h=l(a("CtXQ")),c=l(a("MVZn"));a("7Kak");var f=l(a("9yH6"));a("5NDa");var m=l(a("5rEg"));a("OaEy");var g=l(a("2fM7"));a("y8nQ");var b,E,v,y,I=l(a("Vl3Y")),k=r(a("q1tI")),C=a("MuoO"),D=(l(a("mR73")),I.default.Item),V=(g.default.Option,m.default.TextArea),S=f.default.Group,w=(b=(0,C.connect)(e=>e),E=I.default.create(),b(v=E((y=class extends k.PureComponent{constructor(){super(...arguments),this.state={modalVisible:this.props.visible,mode:1,loading:!1,tableData:[],formData:null,currentEditId:0,enable:0},this.handleCancel=(()=>{2==this.state.mode?this.setState({mode:1,formData:null}):this.props.onCancel()}),this.handleSubmit=(()=>{var e=this.props.form,t=this.props.dispatch,a=this.state.tableData;a.tasks;1==this.state.mode?(this.setState({modalVisible:!1}),this.props.onCancel()):e.validateFields((e,l)=>{e||(l.enable=l.enable?1:0,this.state.currentEditId?(l.ID=this.state.currentEditId,t({type:"gproline/modifyProjectTask",payload:{fields:l,ProId:a.ID,ID:l.ID,callback:e=>{this.setState({mode:1})}}})):t({type:"gproline/addProjectTask",payload:{fields:l,ProId:a.ID,callback:e=>{this.setState({mode:1})}}}))})}),this.handlerDelete=(e=>{var t=this.state.tableData;console.log("\u5220\u9664\u6570\u636e",e,"\u9879\u76eeID",t.ID),this.props.dispatch({type:"gproline/deleteProjectTask",payload:{ProId:t.ID,ID:e.ID,callback:e=>{this.props.onUpdate&&this.props.onUpdate(t)}}})}),this.handlerModify=(e=>{console.log("\u4fee\u6539\u6570\u636e:",e),this.setState({currentEditId:e?e.ID:void 0,mode:2,enable:!!e&&e.enable,formData:(0,c.default)({},e)})}),this.handleStatusChange=(e=>{this.setState({enable:!this.state.enable})})}componentWillReceiveProps(e){!this.state.formData&&e.formData&&this.setState({formData:(0,c.default)({},e.formData),enable:e.formData.enable}),this.setState({modalVisible:e.modalVisible,tableData:e.tableData?e.tableData:{}}),e.modalVisible||this.setState({mode:1})}renderColumns(e,t,a){return k.default.createElement("div",null,e)}render(){var e=this.props.form.getFieldDecorator,t=this.props,a=(t.submitting,t.form,t.dispatch,t.progroupdata,t.gproline,this.state),l=a.loading,r=a.tableData,c=a.formData,g=r.tasks;c&&c.ID||(c={title:"",enable:1,auto:0,reset:0,remarks:""});var b=[{title:"\u6807\u9898",dataIndex:"title",key:"title",render:(e,t)=>this.renderColumns(e,t,"title")},{title:"\u53d1\u5e03/\u56de\u9000",dataIndex:"task_type",key:"task_type",render:(e,t)=>{return t.task_type?k.default.createElement(h.default,{type:"like",theme:"twoTone",twoToneColor:"#52c41a"}):k.default.createElement(h.default,{type:"dislike",theme:"twoTone",twoToneColor:"#eb2f96"})}},{title:"\u72b6\u6001",dataIndex:"enable",key:"enable",render:(e,t)=>{return t.enable?k.default.createElement(h.default,{type:"check"}):k.default.createElement(h.default,{type:"stop"})}},{title:"\u8bf4\u660e",dataIndex:"remarks",key:"remarks",render:(e,t)=>{return k.default.createElement("div",null,e)}},{title:"\u64cd\u4f5c",dataIndex:"utils",key:"utils",render:(e,t)=>{return k.default.createElement("div",null,k.default.createElement(p.default,{title:"\u60a8\u771f\u7684\u8981\u5220\u9664\u8fd9\u6761\u8bb0\u5f55\u5417?",onConfirm:()=>{this.handlerDelete(t)},onCancel:e=>{},okText:"\u662f",cancelText:"\u5426"},k.default.createElement(h.default,{type:"delete",theme:"twoTone",twoToneColor:"#f35553"})),k.default.createElement(h.default,{style:{marginLeft:10},type:"edit",theme:"twoTone",onClick:()=>{this.handlerModify(t)},twoToneColor:"#f35553"}))}}],E={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:12},md:{span:10}}};return 1!=this.state.mode?k.default.createElement("div",null,k.default.createElement(o.default,{title:c.ID?"\u4fee\u6539\u4efb\u52a1":"\u6dfb\u52a0\u4efb\u52a1",visible:this.props.modalVisible,onOk:this.handleSubmit,width:600,onCancel:()=>this.handleCancel()},k.default.createElement(D,(0,u.default)({},E,{label:"\u6807\u9898"}),e("title",{initialValue:c.title,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u4efb\u52a1\u6807\u9898"}]})(k.default.createElement(m.default,{placeholder:"\u4efb\u52a1\u6807\u9898"}))),k.default.createElement(D,(0,u.default)({},E,{label:"\u53d1\u5e03\u811a\u672c"}),e("release_shell",{initialValue:c.release_shell||"",rules:[{required:!1,message:"\u53d1\u5e03\u811a\u672c"}]})(k.default.createElement(V,{style:{minHeight:32},placeholder:"",rows:4}))),k.default.createElement(D,(0,u.default)({},E,{label:"\u56de\u9000\u811a\u672c"}),e("reset_shell",{initialValue:c.reset_shell||"",rules:[{required:!1,message:"\u53d1\u5e03\u811a\u672c"}]})(k.default.createElement(V,{style:{minHeight:32},placeholder:"",rows:4}))),k.default.createElement(D,(0,u.default)({},E,{label:"\u811a\u672c\u8d85\u65f6\u65f6\u95f4"}),e("timeout",{initialValue:c.bash_timeout||10,rules:[{required:!1,message:"\u53d1\u5e03\u811a\u672c"}]})(k.default.createElement("div",null,k.default.createElement(n.default,{min:1,max:600,defaultValue:c.bash_timeout||10}),"\uff08\u5355\u4f4d: \u79d2\uff09"))),k.default.createElement(D,(0,u.default)({},E,{label:"\u4efb\u52a1\u4e3b\u673a"}),e("task_host",{initialValue:c.task_host||"",rules:[{required:!1,message:"\u4efb\u52a1\u4e3b\u673a"}]})(k.default.createElement(V,{style:{minHeight:32},placeholder:"\u591a\u6761\u4e3b\u673a\u4ee5\u6362\u884c\u8f93\u5165",rows:4}))),k.default.createElement(D,(0,u.default)({},E,{label:"\u662f\u5426\u542f\u7528"}),e("enable",{initialValue:c.enable?1:0})(k.default.createElement(d.default,{checkedChildren:"\u5f00\u542f",unCheckedChildren:"\u5173\u95ed",checked:this.state.enable,onChange:e=>this.handleStatusChange(e)}))),k.default.createElement(D,(0,u.default)({},E,{label:"\u4efb\u52a1\u7c7b\u578b"}),e("task_type",{initialValue:c.task_type?1:0})(k.default.createElement(S,{compact:!0},k.default.createElement(f.default,{value:0},"\u53d1\u5e03"),k.default.createElement(f.default,{value:1},"\u56de\u6267")))),k.default.createElement(D,(0,u.default)({},E,{label:"\u4efb\u52a1\u8bf4\u660e"}),e("remarks",{initialValue:c.remarks})(k.default.createElement(V,{style:{minHeight:32},placeholder:"",rows:4}))),k.default.createElement(D,(0,u.default)({},E,{label:"\u811a\u672c\u6392\u5e8f\u503c"}),e("order",{initialValue:c.order||100,rules:[{required:!0,message:"\u811a\u672c\u6392\u5e8f\u503c"}]})(k.default.createElement(n.default,{min:1,max:6e3}))))):k.default.createElement("div",null,k.default.createElement(o.default,{title:"\u7ba1\u7406\u9879\u76ee\u7684\u4efb\u52a1",visible:this.props.modalVisible,onOk:this.handleSubmit,width:1e3,onCancel:()=>this.handleCancel()},k.default.createElement(i.default,{onClick:()=>{this.handlerModify()}},"\u6dfb\u52a0\u4efb\u52a1"),k.default.createElement(s.default,{loading:l,rowKey:e=>e.ID,dataSource:g,columns:b,pagination:!0})))}},v=y))||v)||v);t.default=w},oJ4T:function(e,t,a){"use strict";var l=a("TqRt"),r=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var s=l(a("bx4M"));a("g9YV");var i=l(a("wCAj"));a("/zsF");var o=l(a("PArb"));a("qVdP");var d=l(a("jsC+"));a("Pwec");var n=l(a("CtXQ"));a("14J3");var u=l(a("BMrR"));a("jCWc");var p=l(a("kPKH"));a("lUTK");var h=l(a("BvKs"));a("+L6B");var c=l(a("2/Rp")),f=l(a("MVZn"));a("5NDa");var m=l(a("5rEg"));a("OaEy");var g=l(a("2fM7"));a("y8nQ");var b,E,v,y,I=l(a("Vl3Y")),k=r(a("q1tI")),C=a("MuoO"),D=(l(a("pexS")),l(a("KbiD"))),V=l(a("WNx+")),S=l(a("cbLR")),w=l(a("QQ7z")),P=l(a("mR73")),_=(I.default.Item,g.default.Option,e=>Object.keys(e).map(t=>e[t]).join(",")),x=(m.default.TextArea,b=(0,C.connect)((e,t)=>{return e}),E=I.default.create(),b(v=E((y=class extends k.PureComponent{constructor(){super(...arguments),this.state={expandForm:!1,selectedRows:[],formValues:{},isEditing:!1,isVersingAdding:!1,isTaskAdding:!1,isHostEditing:!1,gprolineId:0,gprogroupId:0,gproId:0,isAddConfigEnabled:!1,isLoadingVersions:!1,proconfigbypid:{data:[]}},this.handleStandardTableChange=((e,t,a)=>{var l=this.props.dispatch,r=this.state.formValues,s=Object.keys(t).reduce((e,a)=>{var l=(0,f.default)({},e);return l[a]=_(t[a]),l},{}),i=(0,f.default)({currentPage:e.current,pageSize:e.pageSize},r,s);a.field&&(i.sorter=`${a.field}_${a.order}`),l({type:"gproline/getProjectList",payload:i})}),this.handleRefreshTableChange=(()=>{var e=this.props.dispatch;e({type:"gproline/getProjectLine",payload:""})}),this.handleFormReset=(()=>{var e=this.props,t=e.form,a=e.dispatch;t.resetFields(),this.setState({formValues:{}}),a({type:"gproline/getProjectList",payload:{}})}),this.toggleForm=(()=>{this.setState({expandForm:!this.state.expandForm})}),this.handleMenuClick=(e=>{var t=this.props.dispatch,a=this.state.selectedRows;if(a)switch(console.log(a),e.key){case"remove":t({type:"gproline/getProjectLine",payload:{ID:a.map(e=>e.ID).join(",")},callback:()=>{this.setState({selectedRows:[]})}});break;case"approval":t({type:"gproline/getProjectLine",payload:{ID:a.map(e=>e.ID).join(",")},callback:()=>{this.setState({selectedRows:[]})}});case"stop":t({type:"gproline/getProjectLine",payload:{ID:a.map(e=>e.ID).join(",")},callback:()=>{this.setState({selectedRows:[]})}});default:break}}),this.handleSelectRows=(e=>{this.setState({selectedRows:e})}),this.handleSaveData=(e=>{console.log("val",e);var t=e.ID,a=e.group_id,l=e.pro_title,r=e.line_id,s=e.pro_alias,i=e.pro_code_url,o=e.pro_enable,d=e.pro_remarks;if("-1"!=a){var n={ID:t,title:l,alias:s,remarks:d,code_url:i,enable:o,groupid:a,lineid:r};this.props.dispatch({type:"gproline/modifyProject",payload:n})}else this.props.dispatch({type:"gproline/getProjectList"})}),this.handleDeleteData=(e=>{console.log(e);var t=e.ID,a={},l=[];l.push(t),a.ids=l,this.props.dispatch({type:"gproline/deleteProject",payload:{tag:!1,infolist:JSON.stringify(a)}})}),this.handleEditConfig=((e,t)=>{console.log("edit",e,t);var a={},l=this.getCurrentProInfo(),r=(l.gprogroupInfo,l.gproInfo);console.log("currentProjectInfo",r),r||(r={}),t||(a.pro=r.title||"",a.ID=r.ID,a.projectTitle="",t=a),console.log("\u7f16\u8f91\u4fe1\u606f:",t),this.setState({isEditing:!0,editInfo:t})}),this.handleEditVersion=((e,t)=>{console.log("\u7f16\u8f91\u914d\u7f6e\u4fe1\u606f:",t),this.props.dispatch({type:"gproline/getVersionsById",payload:{ID:e,callback:e=>{t.versions=e,this.setState({editVersionInfo:t,isVersingAdding:!0})}}})}),this.handleUpdateVersion=(e=>{this.forceUpdate()}),this.handleCancelVersionEdit=(()=>{this.setState({isVersingAdding:!1})}),this.handleEditTask=((e,t)=>{this.props.dispatch({type:"gproline/getTasksById",payload:{ID:e,callback:e=>{t.tasks=e,this.setState({editTaskInfo:t,isTaskAdding:!0})}}})}),this.handleCancelTaskEdit=(()=>{this.setState({isTaskAdding:!1})}),this.handleUpdateTask=(e=>{this.setState({isTaskAdding:!1})}),this.handleEditHost=((e,t)=>{this.props.dispatch({type:"gproline/getAllHostsByProId",payload:{ProId:e,callback:e=>{t.hosts=e,this.setState({editHostInfo:t,isHostEditing:!0})}}})}),this.handleCancelHostEdit=(()=>{this.setState({isHostEditing:!1})}),this.handleUpdateHost=(e=>{this.setState({isHostEditing:!1,editHostInfo:(0,f.default)({},this.state.editHostInfo,{hosts:e})})}),this.handleSubmitEdit=(e=>{console.log("\u6210\u529f\u6dfb\u52a0:",e),this.setState({isEditing:!1})}),this.handleCancelEdit=((e,t)=>{console.log("cacnel..."),this.setState({isEditing:!1})}),this.handleUpdateProject=(e=>{this.setState({isEditing:!1})}),this.handlerSelect=((e,t,a)=>{var l=this.props.dispatch;(0,f.default)({},this.state);if(console.log("val",t),t)switch(l({type:"gproline/clearConfigList",payload:{}}),e){case"gproline":this.setState({gprolineId:t,gprogroupId:0,gproId:0}),l({type:"gproline/getProjectGroupbyId",payload:t});break;case"gprogroup":this.setState({gprogroupId:t,gproId:0}),l({type:"gproline/getProjectbyId",payload:t});break;case"gpro":this.forceRefreshConfigVersions(),this.setState({gproId:t}),l({type:"gproline/getConfigListById",payload:{ID:t}});break}}),this.handlerSelectBlur=((e,t,a)=>{switch(e){case"gpro":handlerSelect(e,t,a);break}}),this.updateProVersion=(e=>{this.props.dispatch({type:"gproline/getVersionsById",payload:{ID:e}})})}componentDidMount(){var e=this.props.dispatch;e({type:"gproline/getProjectLine"})}forceRefreshConfigVersions(){this.state.isLoadingVersions=!1}getCurrentProInfo(){var e=this.props.gproline,t=e.progroupbylid.find((e,t)=>{return e.ID==this.state.gprolineId}),a=e.probygid.find((e,t)=>{return e.ID==this.state.gproId});return{gprogroupInfo:t,gproInfo:a}}renderColumns(e,t,a){return k.default.createElement("div",null,e)}renderOptions(e,t,a){return k.default.createElement("div",null,k.default.createElement(c.default,{onClick:e=>{this.handleEditConfig(t.ID,t)},style:{marginRight:10}},"\u4fee\u6539\u914d\u7f6e"),k.default.createElement(c.default,{onClick:()=>{this.handleEditVersion(t.ID,t)}},"\u7248\u672c\u7ba1\u7406"),k.default.createElement(c.default,{onClick:()=>{this.handleEditTask(t.ID,t)}},"\u4efb\u52a1\u7ba1\u7406"),k.default.createElement(c.default,{onClick:()=>{this.handleEditHost(t.ID,t)}},"\u4e3b\u673a\u5217\u8868"))}render(){for(var e=this.state,t=e.selectedRows,a=(e.modalVisible,e.addInputValue,this.props.form.getFieldDecorator,this.props.children,this.props),l=a.gproline,r=(a.submitting,a.dispatch,!1),f=l.proconfigbypid||[],m=l.block_versions,b=l.block_tasks,E=l.block_all_hosts,v=this.getCurrentProInfo(),y=v.gprogroupInfo,I=v.gproInfo,C=0;C<f.length;C++)f[C].pro=I?I.title:"",f[C].progroup=y?y.title:"",f[C].versions=m[f[C].ID]||[],f[C].tasks=b[f[C].ID]||[],f[C].hosts=E[f[C].ID]||[];var _=!1;function x(e){console.log(`selected ${e}`)}function T(){console.log("focus")}_=!!this.state.gproId,console.log("{ListProject}Parent,props",this.props,this.state);var j=e=>{var t=[];try{switch(e){case"gproline":t=this.props.gproline.prolinedata.data;break;case"gprogroup":t=this.props.gproline.progroupbylid;break;case"gpro":t=this.props.gproline.probygid;break}}catch(e){}var a=[];if(t){for(var l=0;l<t.length;l++)a.push(k.default.createElement(g.default.Option,{value:t[l].ID,title:t[l].title},t[l].title));return a}console.log("arr",t)},O=k.default.createElement(h.default,{onClick:this.handleMenuClick,selectedKeys:[]},k.default.createElement(h.default.Item,{key:"remove"},"\u5220\u9664"),k.default.createElement(h.default.Item,{key:"approval"},"\u6279\u91cf\u542f\u7528"),k.default.createElement(h.default.Item,{key:"stop"},"\u6279\u91cf\u6682\u505c")),R=[{title:"\u914d\u7f6e\u540d\u79f0",dataIndex:"title",key:"title",width:"pro",render:(e,t)=>this.renderColumns(e,t,"title")},{title:"\u6240\u5c5e\u9879\u76ee\u7ec4",dataIndex:"progroup",width:"pro",key:"progroup",render:(e,t)=>this.renderColumns(e,t,"progroup")},{title:"\u6240\u5c5e\u9879\u76ee",dataIndex:"pro",key:"project",width:"pro",render:(e,t)=>this.renderColumns(e,t,"pro")},{title:"\u64cd\u4f5c",dataIndex:"status",key:"status",width:"100px",render:(e,t)=>this.renderOptions(e,t,"status")}];return k.default.createElement("div",null,k.default.createElement(D.default,{modalVisible:this.state.isEditing,formData:this.state.editInfo,onSubmit:this.handleSubmitEdit,onCancel:this.handleCancelEdit,onUpdate:this.handleUpdateProject}),k.default.createElement(V.default,{modalVisible:this.state.isVersingAdding,tableData:this.state.editVersionInfo,onCancel:this.handleCancelVersionEdit,onUpdate:this.handleUpdateVersion}),k.default.createElement(S.default,{modalVisible:this.state.isTaskAdding,tableData:this.state.editTaskInfo,onCancel:this.handleCancelTaskEdit,onUpdate:this.handleUpdateTask}),k.default.createElement(w.default,{modalVisible:this.state.isHostEditing,tableData:this.state.editHostInfo,onCancel:this.handleCancelHostEdit,onUpdate:this.handleUpdateHost}),k.default.createElement(s.default,{bordered:!1},k.default.createElement("div",{className:P.default.tableList},k.default.createElement("div",{className:P.default.tableListOperator},k.default.createElement(u.default,{gutter:16,className:P.default.filterList},k.default.createElement(p.default,null,k.default.createElement(g.default,{showSearch:!0,style:{width:200},placeholder:"\u6240\u6709\u4ea7\u54c1\u7ebf",optionFilterProp:"children",onChange:e=>{this.handlerSelect("gproline",e)},onFocus:T,onBlur:x,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},j("gproline")),k.default.createElement(g.default,{showSearch:!0,style:{width:200},placeholder:"\u6240\u6709\u9879\u76ee\u7ec4",optionFilterProp:"children",onChange:e=>{this.handlerSelect("gprogroup",e)},onFocus:T,onBlur:x,filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},j("gprogroup")),k.default.createElement(g.default,{showSearch:!0,style:{width:200},placeholder:"\u6240\u6709\u9879\u76ee",optionFilterProp:"children",onChange:e=>{this.handlerSelect("gpro",e)},onFocus:T,onBlur:e=>{var t=this.props.gproline.probygid||[];1==t.length&&this.handlerSelect("gpro",e)},filterOption:(e,t)=>t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},j("gpro")),k.default.createElement(c.default,{type:"primary",icon:"plus",disabled:!_,onClick:()=>this.handleEditConfig(0,null)},"\u6dfb\u52a0\u53d1\u5e03\u914d\u7f6e"))),k.default.createElement(u.default,{gutter:16},k.default.createElement(p.default,{span:2}),k.default.createElement(p.default,{span:2},t.length>0&&k.default.createElement("span",null,k.default.createElement(d.default,{overlay:O},k.default.createElement(c.default,null,"\u66f4\u591a\u64cd\u4f5c ",k.default.createElement(n.default,{type:"down"}))))))),k.default.createElement(o.default,null," \u53d1\u5e03\u9879\u5217\u8868 "),k.default.createElement(i.default,{loading:r,rowKey:e=>e.ID,dataSource:f,columns:R,pagination:!1}))))}},v=y))||v)||v);t.default=x}}]);